<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#000000">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Knife Fights of America</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/5.9.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
  <!-- <link rel="stylesheet" href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css"> -->
  <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/"></script>
  <!-- <link rel="stylesheet" href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css"> -->
  <!-- <link rel="stylesheet" href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.css"> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@[VERSION]/dist/L.Control.Locate.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.67.0/dist/L.Control.Locate.min.js" charset="utf-8"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
  <link rel="stylesheet" href="assets/leaflet-groupedlayercontrol/leaflet.groupedlayercontrol.css">
  <link rel="stylesheet" href="assets/css/Control.Geocoder.css">
  <link rel="stylesheet" href="assets/css/app2.css">
  <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://kit.fontawesome.com/2d4b2d7377.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.10.5/typeahead.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.1.1/list.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
  <script src="https://wzrd.in/standalone/formdata-polyfill"></script>
  <script src="https://wzrd.in/standalone/promise-polyfill@latest"></script>
  <script src="https://wzrd.in/standalone/whatwg-fetch@latest"></script>
  <script src="assets/leaflet-groupedlayercontrol/leaflet.groupedlayercontrol.js"></script>
  <script src="assets/js/Control.Geocoder.js"></script>
  <script src="assets/js/app.js"></script>
</head>

<body>
  <div class="navbar fixed-top navbar-expand-md" role="navigation">
    <div class="navbar-icon-container"> <a href="#" class="navbar-icon float-right d-block d-sm-none" id="nav-btn"><i class="fa fa-bars fa-lg white"></i></a>
        <a
        href="#" class="navbar-icon float-right d-block d-sm-none" id="sidebar-toggle-btn"><i class="fa fa-search fa-lg white"></i>
            </a>
    </div> <a href="https://mythicalstateof.com/"><img src="assets/img/favicon.ico" width="40" height="40"></a>

    <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
            <li class="nav-item"><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="about-btn"
                class="nav-link"><i class="fa fa-question-circle white"></i>&nbsp;&nbsp;About</a>
            </li>
            <li class="nav-item"><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="newRide-btn"
                class="nav-link"><i class="fas fa-biking"></i>&#xA0;&#xA0;Submit your Ride</a>
            </li>
            <li class="hidden-xsd-none d-sm-block nav-item"><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="list-btn"
                class="nav-link"><i class="fa fa-list white"></i>&#xA0;&#xA0;Knife Fights</a>
            </li>
        </ul>
    </div>
  </div>

  <div id="container">
    <div id="sidebar">
        <div class="sidebar-wrapper">
            <div class="card" id="features">
                <div class="card-header">
                     <h3 class="card-title">Knife Fights

              <button type="button" class="btn btn-xs btn-secondary float-right" id="sidebar-hide-btn"><i class="fa fa-chevron-left"></i></button></h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-8 col-lg-8">
                            <input type="text" class="form-control search" placeholder="Filter">
                        </div>
                        <div class="col-4 col-lg-4">
                            <button type="button" class="btn btn-primary float-right sort" data-sort="feature-name"
                            id="sort-btn"><i class="fa fa-sort"></i>&#xA0;&#xA0;Sort</button>
                        </div>
                    </div>
                </div>
                <div class="sidebar-table">
                    <table class="table table-hover" id="feature-list">
                        <thead class="hidden">
                            <tr>
                                <th>Icon</th>
                            </tr>
                            <tr></tr>
                            <tr>
                                <th>Name</th>
                            </tr>
                            <tr></tr>
                            <tr>
                                <th>Chevron</th>
                            </tr>
                            <tr></tr>
                        </thead>
                        <tbody class="list"></tbody>
                    </table>
                </div>
                <!-- <div id="sidebarFeature">

            <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>

            <h4 class="modal-title text-primary" id="feature-title"></h4>

          </div> --></div>
        </div>
    </div>
    <div id="map"></div>
  </div>

  <div id="loading">
    <div class="loading-indicator">
        <div class="progress progress-striped active">
            <div class="progress-bar progress-bar-info progress-bar-full"></div>
        </div>
    </div>
  </div>

  <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <!-- <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button> -->
                 <h4 class="modal-title">Welcome to the BootLeaf template!</h4>
            </div>
            <div class="modal-body">
                <p>A simple, responsive template for building web mapping applications with
                    <a
                    href="http://getbootstrap.com/">Bootstrap 3</a>, <a href="http://leafletjs.com/" target="_blank">Leaflet</a>,
                        and <a href="http://twitter.github.io/typeahead.js/" target="_blank">typeahead.js</a>.
                        Open source, MIT licensed, and available on <a href="https://github.com/bmcbride/bootleaf"
                        target="_blank">GitHub</a>.</p>
                <div class="card text-white bg-primary">
                    <div class="card-header">Features</div>
                    <ul class="list-group">
                        <li class="list-group-item">Fullscreen mobile-friendly map template with responsive navbar and modal
                            placeholders</li>
                        <li class="list-group-item">jQuery loading of external GeoJSON files</li>
                        <li class="list-group-item">Logical multiple layer marker clustering via the <a href="https://github.com/Leaflet/Leaflet.markercluster"
                            target="_blank">leaflet marker cluster plugin</a>
                        </li>
                        <li class="list-group-item">Elegant client-side multi-layer feature search with autocomplete using
                            <a
                            href="http://twitter.github.io/typeahead.js/" target="_blank">typeahead.js</a>
                        </li>
                        <li class="list-group-item">Responsive sidebar feature list synced with map bounds, which includes
                            sorting and filtering via <a href="http://listjs.com/" target="_blank">list.js</a>
                        </li>
                        <li class="list-group-item">Marker icons included in grouped layer control via the <a href="https://github.com/ismyrnow/Leaflet.groupedlayercontrol"
                            target="_blank">grouped layer control plugin</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>


  </div>

  <div class="modal fade" id="newRideModal" tabindex="-1" role="dialog"
  aria-labelledby="newRideModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                 <h4 class="modal-title" id="newRideModalLabel">Submit a Ride!</h4>
                <p>Hey we want to hear about your local knife fight! Fill out the survey
                    below and we will add your ride to our database.</p>
            </div>
            <div class="modal-body">
                <form name="submit-to-google-sheet" id="ride-form">
                    <div class="card bg-light card-body mb-3 card bg-faded p-1 mb-3">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label for="ride-name">What is the name of the ride?</label>
                                    <input type="text" class="form-control"
                                    id="ride-name" name="ride-name">
                                </div>
                                <div class="form-group">
                                    <label for="distance">How long is it, on average, in miles?</label>
                                    <input type="text" class="form-control"
                                    id="distance" name="distance">
                                </div>
                                <div class="form-group">
                                    <label for="ride-type">What type of ride is it?</label>
                                    <select class="form-control" id="ride-type"
                                    name="ride-type">
                                        <option value="Critty">Critty - weekly crits or circuits</option>
                                        <option value="Roady">Roady - hilly or flat road racey rides</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="start-spot">Where does it start from?</label>
                                    <input type="text" class="form-control"
                                    id="start-spot" name="start-spot">
                                </div>
                                <div class="form-group">
                                    <label for="drop">Drop or No Drop?</label>
                                    <select class="form-control" id="drop" name="drop">
                                        <option value="Drop">Drop</option>
                                        <option value="No Drop">No Drop</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="date-range">What time of the year does the ride happen?</label>
                                    <select multiple class="selectpicker"
                                    id="date_range" name="date-range">
                                        <option>Year Round</option>
                                        <option>Winter</option>
                                        <option>Spring</option>
                                        <option>Summer</option>
                                        <option>Fall</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="day-of-week">What day(s) of the week does the ride happen?</label>
                                    <select multiple
                                    class="selectpicker" id="day_of_week" name="day-of-week">
                                        <option>Monday</option>
                                        <option>Tuesday</option>
                                        <option>Wednesday</option>
                                        <option>Thursday</option>
                                        <option>Friday</option>
                                        <option>Saturday</option>
                                        <option>Sunday</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label for="start-time">What time does it start?</label>
                                    <input type="text" class="form-control"
                                    id="start-time" name="start-time">
                                </div>
                                <div class="form-group">
                                    <label for="field-size">How many people show up?</label>
                                    <input type="text" class="form-control"
                                    id="field-size" name="field-size">
                                </div>
                                <div class="form-group">
                                    <label for="organizer">Who organizes it?</label>
                                    <input type="text" class="form-control" id="organizer"
                                    name="organizer">
                                </div>
                                <div class="form-group">
                                    <label for="contact">Organizer Contact Info?</label>
                                    <input type="text" class="form-control"
                                    id="contact" name="contact">
                                </div>
                                <label for="ride-info">Tell us about your ride!</label>
                                <textarea class="form-control" rows="4"
                                id="ride-info" name="ride-info"></textarea>
                            </div>
                            <div class="col-lg-12">
                                <p>
                                    <!-- <button type="submit" class="btn btn-primary float-right" data-dismiss="modal">Submit</button> -->
                                    <button type="submit" id="submitButt" class="btn btn-primary" onclick="clearField()">Send</button>
                                </p>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> -->
            </div>
        </div>
    </div>
  </div>

  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                 <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&#xD7;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>farts are cool</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
  </div>

  <div class="modal fade" id="featureModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&#xD7;</button>
                 <h4 class="modal-title text-primary" id="feature-title"></h4>
            </div>
            <div class="modal-body" id="feature-info"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
  </div>


  <script>
  const scriptURL = 'https://script.google.com/macros/s/AKfycbzmZ__CKRcMm7lfZ-LtR_09c1ggHFgCeOgoJFvvJioS7Cs4TLo/exec'
  const form = document.forms["submit-to-google-sheet"]

  form.addEventListener('submit', e => {
    e.preventDefault()
    fetch(scriptURL, { method: 'POST', body: new FormData(form)})
      .then(response => console.log('Success!', response))
      .catch(error => console.error('Error!', error.message))
    });
  form.addEventListener('submit', function() {
    $("#ride-form")[0].reset();
    $('#newRideModal').modal('hide');
    $('#exampleModal').modal("show");
  })


  </script>
</body>
