<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Map</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>
  <link href="css/map.css" rel="stylesheet">


  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>



</head>

<body>
  <div id="map" style="height: calc(100% - 44px); width: 100%; position: absolute !important;"></div>

  <script>
    // Create variable to hold map element, give initial settings to map
    var map = L.map('map',{ center: [45.5122, -122.6587], zoom:10});
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap' }).addTo(map);

    map.locate({setView: true, maxZoom: 10});

    //icon

    var dIcon = L.icon({
    iconUrl: 'https://3dqtv3gwm6l3q4n9e3cldz0w-wpengine.netdna-ssl.com/wp-content/themes/yonderprojects/_/assets/img//blogbts.png',

    iconSize:     [20, 20], // size of the icon
    iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
    popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
    });
    // loading GeoJSON file - Here my html and usa_adm.geojson file resides in same folder



    /*$.getJSON("myfile.geojson",function(data){
      // L.geoJson function is used to parse geojson file and load on to map
      L.geoJson(data, {
        onEachFeature: function(feature, layer){
          var popupcontent = [];
          for (var prop in feature.properties){
            popupcontent.push(prop + ": " + feature.properties[prop]);
          }
          layer.bindPopup(popupcontent.join("<br />"));
        }
      }).addTo(map);    });
*/
      $.getJSON("myfile.geojson", function(data){
        var coords = [];
        var popupcontents = [];
        L.geoJson(data,{
          onEachFeature: function (feature, layer){
            var popupcontent = [];
            coords.push([feature.geometry.coordinates[0][1],feature.geometry.coordinates[0][0]]);
            for (var prop in feature.properties){
              popupcontent.push(prop + ": " + feature.properties[prop]);
            }
            popupcontents.push(popupcontent);
            layer.bindPopup(popupcontent.join("<br />"));
          }
      }).addTo(map);
      console.log(coords, popupcontents);
      for (var i = 0; i < coords.length; i++) {
          marker = new L.marker([coords[i][0],coords[i][1]])
          .bindPopup(popupcontents[i].join("<br />"))
          .addTo(map);
        }

      //var marker = L.circleMarker(coords).addTo(map);
    });



/*
      var coords = mtb.features[0].geometry.coordinates[0];
      var marker = L.marker(new L.LatLng(coords[0], coords[1]), {
          icon: L.mapbox.marker.icon({'marker-symbol': 'post', 'marker-color': '0044FF'}),
          title: 'My Bike Route'
      }).addTo(map);

*/


</script>
</body>
